<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Restaurant Menu</title>
    <link rel="manifest" href="manifest.json" />
    <style>
      :root {
        --brand-green: #154734;
        --brand-gold: #d4af37;
        --light-bg: #f8f8f5;
        --tab-inactive: #e0ddd8;
        --text-dark: #1a1a1a;
        --divider: #ddd9d2;
      }

      body,
      html {
        margin: 0;
        padding: 0;
        font-family: sans-serif;
        background: var(--light-bg);
        color: var(--text-dark);
      }

      header {
        background: var(--brand-green);
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 0.5rem 0;
      }

      header img {
        max-height: 200px;
        width: auto;
        object-fit: contain;
        display: block;
      }

      main {
        padding: 2rem 1rem;
        display: flex;
        justify-content: center;
      }

      .menu-wrapper {
        width: 100%;
        max-width: 500px;
      }

      .note {
        font-size: 0.95rem;
        color: #555;
        margin-bottom: 0.8rem;
        font-style: italic;
      }

      .menu-header {
        display: flex;
        justify-content: space-between;
        font-weight: bold;
        font-size: 0.95rem;
        border-bottom: 2px solid var(--divider);
        padding-bottom: 0.4rem;
        margin-bottom: 0.6rem;
        color: var(--brand-green);
      }

      .menu-section {
        margin-bottom: 2rem;
      }

      h1 {
        margin: 0 0 1rem;
        font-size: 1.6rem;
        color: var(--brand-green);
      }

      .tabs {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1rem;
        flex-wrap: wrap;
      }

      .tab {
        flex: 1;
        text-align: center;
        padding: 0.6rem 0;
        background: var(--tab-inactive);
        border-radius: 4px;
        cursor: pointer;
        font-weight: 500;
        color: var(--text-dark);
        transition: background 0.2s, color 0.2s;
      }

      .tab.active {
        background: var(--brand-gold);
        color: var(--brand-green);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
      }

      .content {
        background: #fff;
        padding: 1rem;
        border-radius: 6px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        min-height: 150px;
      }

      ul {
        list-style: none;
        padding-left: 0;
        margin: 0;
      }

      li {
        display: flex;
        justify-content: space-between;
        padding: 0.5rem 0;
        border-bottom: 1px solid var(--divider);
      }

      li:last-child {
        border-bottom: none;
      }

      li strong {
        font-weight: 600;
      }
    </style>
  </head>
  <body>
    <header>
      <img src="assets/logo.png" alt="Logo" />
    </header>
    <main>
      <div class="menu-wrapper">
        <h1>Menu</h1>
        <div class="tabs" id="menu-tabs"></div>
        <div class="content" id="menu-content">Loadingâ€¦</div>
      </div>
    </main>

    <script src="menu-data.js"></script>
    <script>
      const content = document.getElementById("menu-content");
      const tabsContainer = document.getElementById("menu-tabs");

      const displayNames = {
        morning: "Morning (Fajr - Zuhr)",
        maincourse: "Main Course (After Zuhr - 11.30pm)",
        evening: "Evening (After Asr - 11pm)",
        fullday: "Beverages",
        fridayspecial: "Friday Special"
      };

      function renderTabs() {
        const keys = Object.keys(MENU_DATA);
        tabsContainer.innerHTML = keys
          .map(
            (key, index) => `
              <div class="tab ${index === 0 ? "active" : ""}" data-meal="${key}">
                ${displayNames[key] || key}
              </div>`
          )
          .join("");

        const tabs = document.querySelectorAll(".tab");
        tabs.forEach((tab) => {
          tab.addEventListener("click", () => {
            tabs.forEach((t) => t.classList.remove("active"));
            tab.classList.add("active");
            renderMenu(tab.dataset.meal);
          });
        });
      }

      function renderMenu(meal) {
        const data = MENU_DATA[meal] || {};
        const sections = data.sections || [];

        if (!sections.length) {
          content.innerHTML = "<p>No items available.</p>";
          return;
        }

        const headerHTML = `
          <div class="menu-header">
            <span>Dish</span>
            <span>Price (in SAR)</span>
          </div>`;

        const sectionsHTML = sections
          .map((section) => {
            const noteHTML = section.note
              ? `<div class="note">${section.note}</div>`
              : "";
            const itemsHTML = `
              <ul>
                ${section.items
                  .map(
                    (item) =>
                      `<li><strong>${item.name}</strong><span>${item.price}</span></li>`
                  )
                  .join("")}
              </ul>`;
            return `<div class="menu-section">${noteHTML}${itemsHTML}</div>`;
          })
          .join("");

        content.innerHTML = headerHTML + sectionsHTML;
      }

      window.addEventListener("DOMContentLoaded", () => {
        renderTabs();
        const firstKey = Object.keys(MENU_DATA)[0];
        renderMenu(firstKey);

        if ("serviceWorker" in navigator) {
          navigator.serviceWorker.register("sw.js").catch(console.error);
        }
      });
    </script>
  </body>
</html>
